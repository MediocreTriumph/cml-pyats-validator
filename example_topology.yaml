# Example CML Topology for Testing PyATS Validator
# This topology creates a simple OSPF network for validation testing

lab:
  description: "PyATS Validator Test Lab - OSPF Triangle Topology"
  title: "PyATS Validator Test"
  version: "0.0.4"
  notes: |
    Test topology for CML PyATS Validator with:
    - 3 routers in OSPF area 0
    - Full mesh connectivity
    - Loopback interfaces for testing
    
    Use this lab to test:
    - Protocol validation (OSPF)
    - Interface status checks
    - Reachability testing
    - Configuration retrieval

nodes:
  - id: n0
    label: R1
    node_definition: iosv
    x: -300
    y: 0
    configuration: |
      hostname R1
      !
      interface GigabitEthernet0/0
       ip address 10.1.12.1 255.255.255.0
       ip ospf 1 area 0
       no shutdown
      !
      interface GigabitEthernet0/1
       ip address 10.1.13.1 255.255.255.0
       ip ospf 1 area 0
       no shutdown
      !
      interface Loopback0
       ip address 1.1.1.1 255.255.255.255
       ip ospf 1 area 0
      !
      router ospf 1
       router-id 1.1.1.1
       log-adjacency-changes
      !
      line vty 0 4
       exec-timeout 0 0
       login local
       transport input all
      !
      end

  - id: n1
    label: R2
    node_definition: iosv
    x: 300
    y: 0
    configuration: |
      hostname R2
      !
      interface GigabitEthernet0/0
       ip address 10.1.12.2 255.255.255.0
       ip ospf 1 area 0
       no shutdown
      !
      interface GigabitEthernet0/1
       ip address 10.1.23.2 255.255.255.0
       ip ospf 1 area 0
       no shutdown
      !
      interface Loopback0
       ip address 2.2.2.2 255.255.255.255
       ip ospf 1 area 0
      !
      router ospf 1
       router-id 2.2.2.2
       log-adjacency-changes
      !
      line vty 0 4
       exec-timeout 0 0
       login local
       transport input all
      !
      end

  - id: n2
    label: R3
    node_definition: iosv
    x: 0
    y: -300
    configuration: |
      hostname R3
      !
      interface GigabitEthernet0/0
       ip address 10.1.13.3 255.255.255.0
       ip ospf 1 area 0
       no shutdown
      !
      interface GigabitEthernet0/1
       ip address 10.1.23.3 255.255.255.0
       ip ospf 1 area 0
       no shutdown
      !
      interface Loopback0
       ip address 3.3.3.3 255.255.255.255
       ip ospf 1 area 0
      !
      router ospf 1
       router-id 3.3.3.3
       log-adjacency-changes
      !
      line vty 0 4
       exec-timeout 0 0
       login local
       transport input all
      !
      end

links:
  - id: l0
    i1: i0
    n1: n0
    i2: i1
    n2: n1
    label: R1-R2
    
  - id: l1
    i1: i2
    n1: n0
    i2: i3
    n2: n2
    label: R1-R3
    
  - id: l2
    i1: i4
    n1: n1
    i2: i5
    n2: n2
    label: R2-R3

annotations:
  - type: text
    x1: 0
    y1: 100
    text_content: "OSPF Area 0\nTriangle Topology"
    text_size: 16
    text_bold: true
    color: "#000000"
    
  - type: rectangle
    x1: -400
    y1: -400
    x2: 400
    y2: 150
    border_color: "#00FF00"
    border_style: "4,2"
    thickness: 2
    color: "rgba(0,255,0,0.1)"
    z_index: -1
